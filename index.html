<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Battle Simulator</title>
<style>
    body {
        background: #111;
        color: white;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    #gameCanvas {
        background: #000;
        display: block;
        margin: 20px auto;
        border: 2px solid #444;
    }
    #log {
        width: 90%;
        max-width: 900px;
        height: 200px;
        background: #000;
        border: 1px solid #333;
        overflow-y: auto;
        margin: 20px auto;
        padding: 10px;
        font-family: monospace;
        text-align: left;
    }
</style>
</head>
<body>

<h1>AI Battle Simulator</h1>

<canvas id="gameCanvas" width="800" height="400"></canvas>

<div id="log"></div>

<script>
/* ===============================
   ðŸ”µ STEP 1 â€” PASTE YOUR DATASET HERE
   =============================== */

const DATASET = [
    // Example:
    // { atk: 30, def: 10, hp: 100, move: "right" },
    // { atk: 20, def: 20, hp: 100, move: "left" }
];


/* ===============================
   ðŸ”µ STEP 2 â€” SIM ENGINE
   =============================== */

// Battlefield
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Logging
const logBox = document.getElementById("log");
function log(msg) {
    logBox.innerHTML += msg + "<br>";
    logBox.scrollTop = logBox.scrollHeight;
}

// Fighter class
class Fighter {
    constructor(data, x, color) {
        this.atk = data.atk;
        this.def = data.def;
        this.hp = data.hp;
        this.move = data.move;
        this.x = x;
        this.y = canvas.height / 2;
        this.color = color;
        this.size = 30;
    }

    draw() {
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x - this.size/2, this.y - this.size/2, this.size, this.size);
    }

    step() {
        if (this.move === "right") this.x += 2;
        if (this.move === "left") this.x -= 2;

        // Clamp so they never get stuck off-screen
        this.x = Math.max(0 + this.size/2, Math.min(canvas.width - this.size/2, this.x));
    }

    isTouching(other) {
        return Math.abs(this.x - other.x) < this.size;
    }

    attack(target) {
        const dmg = Math.max(1, this.atk - target.def);
        target.hp -= dmg;
        log(`${this.color} hit for ${dmg}! Target HP: ${target.hp}`);
    }
}

/* ===============================
   ðŸ”µ STEP 3 â€” START THE BATTLE
   =============================== */

function startBattle() {
    if (DATASET.length < 2) {
        alert("Dataset must have at least TWO fighters!");
        return;
    }

    const f1 = new Fighter(DATASET[0], 100, "cyan");
    const f2 = new Fighter(DATASET[1], 700, "red");

    log("Battle begin!");

    function loop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        f1.step();
        f2.step();

        if (f1.isTouching(f2)) {
            f1.attack(f2);
            f2.attack(f1);
        }

        f1.draw();
        f2.draw();

        if (f1.hp <= 0 || f2.hp <= 0) {
            log("Battle Over!");
            if (f1.hp > f2.hp) log("Winner: CYAN");
            else if (f2.hp > f1.hp) log("Winner: RED");
            else log("Draw!");
            return;
        }

        requestAnimationFrame(loop);
    }

    loop();
}

startBattle();
</script>
</body>
</html>
